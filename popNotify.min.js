!function(){class c{static timeouts=[];static instances=[];static pauseAll(){for(let a of c.timeouts)a.pause()}static stopAll(){for(let a of c.timeouts)a.stop()}static resumeAll(){for(let a of c.instances)a.resume()}static restartAll(){for(let a of c.instances)a.restart()}static startAll(){for(let a of c.instances)a.startIfNot()}static setTimeout(a=()=>{},b=0){return new c(b).callback(a).start()}static sleep(a){return new c(a).wait()}constructor(a=0){this.total=a,this.timer=null,this.remain=a,this.emitter=new class{events={};on(a,b){this.events[a]||(this.events[a]=[]),this.events[a].push(b)}off(a,c){if(this.events[a]){let b=this.events[a].indexOf(c);b> -1&&this.events[a].splice(b,1)}}emit(a,...b){if(this.events[a]){for(let c of this.events[a])if(!1===c(...b))break}}async emitAsync(a,...b){if(this.events[a]){for(let c of this.events[a])if(await c(...b)=== !1)break}}clear(){this.events={}}},c.instances.push(this)}clear(){return clearTimeout(this.timer),c.timeouts.splice(c.timeouts.indexOf(this),1),this.timer=null,this}startIfNot(){return this.remain&&!this.timer&&this.start,this}start(){return this.clear(),this.remain=this.total,this.resume(),this}_end(){this.clear(),this.remain=0,this.emitter.emit("end"),this.emitter.clear()}callback(a){return this.emitter.on("end",a),this}wait(){return new Promise(a=>{this.timer||0!==this.remain||a(),this.callback(a),null==this.timer&&this.start()})}stop(){return this.pause(),this.remain=this.total,this.emitter.emit("stopped",this.remain),this}pause(){return this.clear(),this.remain=this.remain-(Date.now()-this.startAt),this.emitter.emit("paused",this.remain),this}resume(){return this.timer?(console.warn("[Timer] Already running."),this):(this.startAt=Date.now(),this.timer=setTimeout(()=>this._end(),this.remain),c.timeouts.push(this),this)}restart(){return this.start()}}class b{static prefix="PN2U-";constructor(a={}){if(this.opt=Object.assign({},{theme:"blue",context:null,title:"",content:"",btns:[],onclick:()=>this.close(),timeout:5e3,className:""},a),0!==this.opt.timeout&&(this.opt.timeout=isNaN(this.opt.timeout)?5e3:this.opt.timeout),!this.opt.context)throw new Error("Need PopNotify host");this.showing=!1,this.timer=new c(this.opt.timeout??50045),this.timer.callback(()=>this.close()),this.el=null,this.spawn()}spawn(){if(!this.showing){if(this.el?.remove(),this.el=document.createElement("div"),this.el.id=b.prefix+Math.floor(1e6*Math.random()),this.el.className=[b.prefix+"container",b.prefix+"theme-"+this.opt.theme,this.opt.className].filter(a=>a&&a.length).join(" "),this.titleEl=document.createElement("div"),this.titleEl.className=b.prefix+"title",this.titleEl.addEventListener("click",this.opt.onclick),this.el.appendChild(this.titleEl),this.contentEl=document.createElement("div"),this.contentEl.className=b.prefix+"content",this.contentEl.addEventListener("click",this.opt.onclick),this.el.appendChild(this.contentEl),this.buttonsEl=document.createElement("div"),this.buttonsEl.className=b.prefix+"buttons",this.el.appendChild(this.buttonsEl),0!==this.opt.timeout){let a=document.createElement("style");a.appendChild(document.createTextNode(`#${this.el.id}-timer::after {animation: PN2U-anim-progress ${this.opt.timeout/1e3}s linear forwards;}`)),this.timerEl=document.createElement("div"),this.timerEl.id=`${this.el.id}-timer`,this.timerEl.className=b.prefix+"timer",this.el.appendChild(a),this.el.appendChild(this.timerEl)}this.el.addEventListener("mouseenter",()=>this.timer.pause()),this.el.addEventListener("mouseleave",()=>this.timer.resume())}}setTitle(a,b=!1){b?this.titleEl.innerHTML=a:this.titleEl.innerText=a}setContent(a,b=!1){b?this.contentEl.innerHTML=a:this.contentEl.innerText=a}setButtons(b,c=!0){for(let{label:d,onclick:e}of(c&&(this.buttonsEl.innerHTML=""),b)){let a=document.createElement("button");a.innerText=d,a.onclick=()=>{this.close(),e()},this.buttonsEl.appendChild(a)}}setPosition(a){for(let b of Object.keys(a)){let c=a[b];this.el.style[b]=c}}getHeight(){return this.el.offsetHeight}show(a=!1){this.setTitle(this.opt.title,a),this.setContent(this.opt.content,a),this.setButtons(this.opt.btns??[]),this.opt.context.showUnit(this),this.el.classList.add("PN2U-do-enter")}startTimer(){this.opt.timeout>0&&this.timer.start()}close(){this.opt.context.hideUnit(this)}destory(){this.el.classList.remove("PN2U-do-enter"),this.el.classList.add("PN2U-do-exit"),setTimeout(()=>{this.el.remove()},500)}}class a{static RightTop={top:"20px",right:"20px"};static LeftTop={top:"20px",left:"20px"};static RightBottom={bottom:"20px",right:"20px"};static LeftBottom={bottom:"20px",left:"20px"};static importStyle(){let a=document.querySelector("style#PN2-styles");a&&a.remove();let b=document.createElement("style");b.appendChild(document.createTextNode('.PN2-container { position: fixed; min-width: 250px; width: -webkit-max-content; width: -moz-max-content; width: max-content; height: 100vh; overflow: hidden; display: -webkit-box; display: -ms-flexbox; display: flex; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; z-index: 99999; } .PN2U-container { position: fixed; -webkit-transition: all 0.3s ease; -o-transition: all 0.3s ease; transition: all 0.3s ease; margin: 10px 20px; line-height: 24px; min-width: 200px; max-width: 60vw; width: -webkit-max-content; width: -moz-max-content; width: max-content; height: -webkit-fit-content; height: -moz-fit-content; height: fit-content; border-radius: 6px; min-height: 30px; overflow: hidden; -webkit-box-shadow: 0 3px 6px #8080805f; box-shadow: 0 3px 6px #8080805f; } .PN2U-do-enter{ -webkit-animation: PN2U-anim-in 0.6s cubic-bezier(0.1, 1, 0, 1) forwards; animation: PN2U-anim-in 0.6s cubic-bezier(0.1, 1, 0, 1) forwards; } .PN2U-do-exit{ -webkit-animation: PN2U-anim-out 0.6s cubic-bezier(0.1, 1, 0, 1) forwards; animation: PN2U-anim-out 0.6s cubic-bezier(0.1, 1, 0, 1) forwards; } .PN2U-title{ padding: 6px 12px 3px 12px; opacity: 0; font-size: larger; word-break: break-all; -webkit-animation: PN2U-anim-text-in 1s cubic-bezier(0.1, 1, 0, 1) forwards .2s; animation: PN2U-anim-text-in 1s cubic-bezier(0.1, 1, 0, 1) forwards .2s; } .PN2U-content{ padding: 3px 12px 6px 12px; opacity: 0; -webkit-filter: opacity(0.8); filter: opacity(0.8); word-break: break-all; -webkit-animation: PN2U-anim-text-in 1s cubic-bezier(0.1, 1, 0, 1) forwards .3s; animation: PN2U-anim-text-in 1s cubic-bezier(0.1, 1, 0, 1) forwards .3s; } .PN2U-buttons{ opacity: 0; -webkit-animation: PN2U-anim-text-in 1s cubic-bezier(0.1, 1, 0, 1) forwards .4s; animation: PN2U-anim-text-in 1s cubic-bezier(0.1, 1, 0, 1) forwards .4s; margin: 0; padding: 0; width: 100%; display: -webkit-box; display: -ms-flexbox; display: flex; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -ms-flex-wrap: nowrap; flex-wrap: nowrap; -ms-flex-line-pack: stretch; align-content: stretch; -ms-flex-pack: distribute; justify-content: space-around; -webkit-box-align: stretch; -ms-flex-align: stretch; align-items: stretch; height: 24px; } .PN2U-buttons:empty{ display: none!important; } .PN2U-buttons>button{ -webkit-transition: all .3s ease; -o-transition: all .3s ease; transition: all .3s ease; border:none; background: rgba(255, 255, 255, 0.358); -webkit-box-flex: 1; -ms-flex: 1; flex: 1; border-left: 2px solid rgba(255, 255, 255, 0.436); text-shadow: 0px 0px 3px #00000063; } .PN2U-buttons>button:first-child{ border-left: none; } .PN2U-buttons>button:hover{ background: rgba(255, 255, 255, 0.557); } .PN2U-timer{ width: 100%; height:2px; background: rgba(255, 255, 255, 0.358); } .PN2U-timer::after{ content: " "; display: block; -webkit-transition: all .3s; -o-transition: all .3s; transition: all .3s; height:2px; width: 50%; background-color: white; } .PN2-pause-anim .PN2U-timer, .PN2-pause-anim .PN2U-timer::after, .PN2U-container:hover .PN2U-timer::after{ -webkit-animation-play-state:paused!important; animation-play-state:paused!important; } .PN2U-theme-white{ background: rgb(255, 255, 255); color: black; } .PN2U-theme-dark{ background: rgb(82, 82, 82); color: rgb(255, 255, 255); } .PN2U-theme-dark button{ color: rgb(255, 255, 255); } .PN2U-theme-dark .PN2U-buttons{ background: rgb(28, 28, 28); } .PN2U-theme-blue{ background: rgb(29, 153, 255); color: rgb(255, 255, 255); } .PN2U-theme-blue button{ color: rgb(255, 255, 255); } .PN2U-theme-blue .PN2U-buttons{ background: rgba(255, 255, 255, 0.046); } .PN2U-theme-green{ background: rgb(37, 196, 37); color: rgb(255, 255, 255); } .PN2U-theme-green button{ color: rgb(255, 255, 255); } .PN2U-theme-green .PN2U-buttons{ background: rgba(255, 255, 255, 0.046); } .PN2U-theme-red{ background: rgb(185, 13, 13); color: rgb(255, 255, 255); } .PN2U-theme-red button{ color: rgb(255, 255, 255); } .PN2U-theme-red .PN2U-buttons{ background: rgba(255, 255, 255, 0.046); } .PN2U-theme-yellow{ background: rgb(217, 192, 3); color: rgb(255, 255, 255); } .PN2U-theme-yellow button{ color: rgb(255, 255, 255); } .PN2U-theme-yellow .PN2U-buttons{ background: rgba(255, 255, 255, 0.046); } .PN2U-theme-orange{ background: rgb(217, 131, 3); color: rgb(255, 255, 255); } .PN2U-theme-orange button{ color: rgb(255, 255, 255); } .PN2U-theme-orange .PN2U-buttons{ background: rgba(255, 255, 255, 0.046); } @-webkit-keyframes PN2U-anim-in { from { -webkit-transform: scale(0); transform: scale(0); opacity: 0; } to { -webkit-transform: scale(1); transform: scale(1); opacity: 1; } } @keyframes PN2U-anim-in { from { -webkit-transform: scale(0); transform: scale(0); opacity: 0; } to { -webkit-transform: scale(1); transform: scale(1); opacity: 1; } } @-webkit-keyframes PN2U-anim-out { from { -webkit-transform: scale(1); transform: scale(1); opacity: 0; } to { -webkit-transform: scale(0); transform: scale(0); opacity: 1; } } @keyframes PN2U-anim-out { from { -webkit-transform: scale(1); transform: scale(1); opacity: 0; } to { -webkit-transform: scale(0); transform: scale(0); opacity: 1; } } @-webkit-keyframes PN2U-anim-text-in { from { -webkit-transform: translateY(8px); transform: translateY(8px); opacity: 0; } to { -webkit-transform: translateY(0px); transform: translateY(0px); opacity: 1; } } @keyframes PN2U-anim-text-in { from { -webkit-transform: translateY(8px); transform: translateY(8px); opacity: 0; } to { -webkit-transform: translateY(0px); transform: translateY(0px); opacity: 1; } } @-webkit-keyframes PN2U-anim-progress{ from{ width: 0%; } to{ width: 100%; } } @keyframes PN2U-anim-progress{ from{ width: 0%; } to{ width: 100%; } }')),document.head.appendChild(b)}static prefix="PN2-";constructor(c={}){a.importStyle(),this.opts=Object.assign({},{pos:a.RightTop,max:0,gag:"10px",className:""},c),this.stack=[],this.showing=[],this.el=document.createElement("div"),this.el.id=a.prefix+Math.floor(1e6*Math.random()),this.el.className=a.prefix+"container",this.opts.pos.right&&(this.el.style.right=this.opts.pos.right),this.opts.pos.left&&(this.el.style.left=this.opts.pos.left),this.opts.pos.top&&(this.el.style.top=this.opts.pos.top),this.opts.pos.bottom&&(this.el.style.bottom=this.opts.pos.bottom);let b=this.opts.pos.right?"end":"start";this.el.style.cssText+=` -webkit-box-align: ${b}; -ms-flex-align: ${b}; align-items: flex-${b};`,document.body.appendChild(this.el)}getContext(){return{host:this,opts:this.opts}}info(a={}){this._send("blue",a)}warning(a={}){this._send("orange",a)}success(a={}){this._send("green",a)}error(a={}){this._send("red",a)}dark(a={}){this._send("dark",a)}white(a={}){this._send("white",a)}show(c){let a=new b(c);return a.show(),a}_send(b,a={}){return this.show({theme:b,context:this,title:a.title??"",content:a.content??"",btns:a.btns??[],onclick:a.onclick??(()=>{}),timeout:a.timeout??5e3,className:a.className??""})}showUnit(a){this.stack.push(a),this.triggerPushStack()}hideUnit(a){-1!==this.stack.indexOf(a)?this.stack.splice(this.stack.indexOf(a),1):-1!==this.showing.indexOf(a)&&(this.showing.splice(this.showing.indexOf(a),1),a.destory(),this.triggerPushStack())}triggerPushStack(){for(;(this.opts.max<=0||this.showing.length<this.opts.max)&&this.stack.length;){let a=this.stack.shift();this.showing.push(a),this.el.appendChild(a.el),a.startTimer()}this.refreshPositions()}addpx(...a){return a.map(a=>+(a+"").replace("px","")).reduce(function(a,b){return a+b},0)+"px"}refreshPositions(){let e=this.opts.pos.left?"left":"right",f=this.opts.pos.left??this.opts.pos.right,a=this.opts.pos.top?"top":"bottom",b={[e]:f,[a]:this.opts.pos[a]};for(let c=0;c<this.showing.length;c++){let d=this.showing[c];d.setPosition(b),b[a]=this.addpx(b[a],d.getHeight(),this.opts.gag)}}}window.PopNotify=a,window.popNotify=new a,window.PopNotifyUnit=b}()